<app-navbar></app-navbar>
<div class="container-fluid mt-3">
  <div class="search-bar">
    <div class="row g-2 align-items-center">
      <div class="col-md-4">
        <div class="input-group">
          <label class="input-group-text" for="search-by"><i class="fas fa-user"></i></label>
          <input type="text" class="form-control" placeholder="Nom du chauffeur" id="search-by" aria-label="Search by name">
        </div>
      </div>
      <div class="col-md-4">
        <div class="input-group">
          <label class="input-group-text" for="phone-search"><i class="fas fa-phone"></i></label>
          <input type="text" class="form-control" placeholder="N° de téléphone" id="phone-search" aria-label="Search by phone">
          <button class="btn btn-primary" type="button" (click)="searchByPhone()" aria-label="Search">
            <i *ngIf="!isSearchingPhone" class="fas fa-search"></i>
            <i *ngIf="isSearchingPhone" class="fas fa-spinner fa-spin"></i>
          </button>
        </div>
      </div>
      <div class="col-md-4">
        <div class="input-group">
          <label class="input-group-text" for="email-search"><i class="fas fa-envelope"></i></label>
          <input type="email" class="form-control" placeholder="E-mail" id="email-search" aria-label="Search by email">
          <button class="btn btn-primary" type="button" (click)="searchByEmail()" aria-label="Search">
            <i *ngIf="!isSearchingEmail" class="fas fa-search"></i>
            <i *ngIf="isSearchingEmail" class="fas fa-spinner fa-spin"></i>
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-3">
      <div class="profile-sidebar">
        <div class="profile-avatar">{{ driver.initial }}</div>
        <h4>{{ driver.name }}</h4>
        <p class="status">{{ driver.status }}</p>
        <hr>
        <div class="info-block">
          <p><strong>Ville:</strong> {{ driver.city }}</p>
          <p><strong>Break:</strong> {{ driver.break }}</p>
          <p><strong>ID:</strong> {{ driver.id }}</p>
          <p><strong>CB1:</strong> {{ driver.cb1 }} <br><strong>CB2:</strong> {{ driver.cb2 }}</p>
        </div>
        <div class="mt-3">
          <img [src]="driver.mapImageUrl" alt="Map" class="img-fluid rounded">
        </div>
      </div>
    </div>

    <div class="col-md-9">
      <div class="content-area">
        <ul class="nav nav-pills mb-3" role="tablist">
          <li class="nav-item" role="presentation">
            <button class="nav-link" [class.active]="activeTab === 'info'" (click)="selectTab('info')" type="button" role="tab" data-bs-toggle="tooltip" title="Driver Information"><i class="fas fa-info-circle"></i> Informations</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" [class.active]="activeTab === 'update'" (click)="selectTab('update')" type="button" role="tab" data-bs-toggle="tooltip" title="Update Profile"><i class="fas fa-edit"></i> Mise à jour</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" [class.active]="activeTab === 'courses'" (click)="selectTab('courses')" type="button" role="tab" data-bs-toggle="tooltip" title="Ride History"><i class="fas fa-route"></i> Courses</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" [class.active]="activeTab === 'docs'" (click)="selectTab('docs')" type="button" role="tab" data-bs-toggle="tooltip" title="Documents"><i class="fas fa-file-alt"></i> Documents</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" [class.active]="activeTab === 'payments'" (click)="selectTab('payments')" type="button" role="tab" data-bs-toggle="tooltip" title="Payments"><i class="fas fa-credit-card"></i> Paiements</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" [class.active]="activeTab === 'history'" (click)="selectTab('history')" type="button" role="tab" data-bs-toggle="tooltip" title="Activity History"><i class="fas fa-history"></i> Historique</button>
          </li>
        </ul>

        <div class="tab-content">
          <div *ngIf="activeTab === 'info'" class="tab-pane fade show active">
            <div class="info-section mb-3">
              <h5><i class="fas fa-building"></i> Informations de Société</h5>
              <div class="row">
                <div class="col-md-6"><p><span class="info-label">Siren/Siret:</span> {{ company.siren }}</p></div>
                <div class="col-md-6"><p><span class="info-label">Nom de Société:</span> {{ company.name }}</p></div>
                <div class="col-md-6"><p><span class="info-label">IBAN:</span> {{ company.iban }}</p></div>
                <div class="col-md-6"><p><span class="info-label">TVA:</span> {{ company.vat }}</p></div>
                <div class="col-md-6"><p><span class="info-label">Lien de mise à jour:</span> <a href="#" aria-label="Update company information">Mettre à jour</a></p></div>
                <div class="col-md-6"><p><span class="info-label">Adresse:</span> {{ company.address }}</p></div>
              </div>
            </div>
            <div class="info-section mb-3">
              <h5><i class="fas fa-car"></i> Véhicule</h5>
              <div class="row">
                <div class="col-md-4"><p><span class="info-label">Année de voiture:</span> {{ vehicle.year }}</p></div>
                <div class="col-md-4"><p><span class="info-label">Modèle de voiture:</span> {{ vehicle.model }}</p></div>
                <div class="col-md-4"><p><span class="info-label">Immatriculation:</span> {{ vehicle.registration }}</p></div>
              </div>
            </div>
            <div class="info-section mb-3">
              <h5><i class="fas fa-info"></i> Informations</h5>
              <div class="row">
                <div class="col-md-4"><p><span class="info-label">Total de courses:</span> {{ info.totalRides }}</p></div>
                <div class="col-md-4"><p><span class="info-label">Date de naissance:</span> {{ info.birthDate }}</p></div>
                <div class="col-md-4"><p><span class="info-label">Raison de état:</span> {{ info.statusReason }}</p></div>
              </div>
            </div>
            <div class="info-section">
              <h5><i class="fas fa-mobile-alt"></i> Informations de l'Application <span class="badge bg-secondary">Notif de test</span></h5>
              <div class="row">
                <div class="col-md-4"><p><span class="info-label">Date d'inscription:</span> {{ appInfo.registrationDate }}</p></div>
                <div class="col-md-4"><p><span class="info-label">Dernière ouverture:</span> {{ appInfo.lastOpened }}</p></div>
                <div class="col-md-4"><p><span class="info-label">Position actuelle:</span> {{ appInfo.currentPosition }}</p></div>
              </div>
            </div>
          </div>
          <div *ngIf="activeTab === 'update'" class="tab-pane fade show active">Mise à jour content...</div>
          <div *ngIf="activeTab === 'courses'" class="tab-pane fade show active">Courses content...</div>
          <div *ngIf="activeTab === 'docs'" class="tab-pane fade show active">Documents content...</div>
          <div *ngIf="activeTab === 'payments'" class="tab-pane fade show active">Paiements content...</div>
          <div *ngIf="activeTab === 'history'" class="tab-pane fade show active">Historique content...</div>
        </div>
      </div>
    </div>
  </div>
</div>